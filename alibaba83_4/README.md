# 致命真相
当你推开第四扇门，眼前一片灰蒙蒙的。不远处有三个光团，你的直觉告诉你，这三个光团与你密切相关。但此刻，它们被灰雾重重包裹着，完全无法触达。

"这里面有你想要知道的一切，但揭开它之前，还有最后一层防护措施，这对于你一个优秀的程序猿来说，应该不在话下。“

## 赛题说明
这是一个服务器软件，基于 Spring WebFlux 实现，通过 HTTP 建立 WebSocket 连接之后进行数据传输，使用 Spring Security 进行身份验证。

**你的任务：**
获取光团数据异常，请快速找到问题并修复他们。
记住，你只有4个小时的时间。4小时后，空间将会崩塌。

**Tips:**
快快打开你的背包，那就是引领你通关的秘籍(°▽°)/ ——来自万圣节鬼鬼的提醒

### 提示
#### 1. 你可以从单测开始
我们已经准备好了单测小糖果，先 run 一下吧。
你可以打开 terminal 执行 `mvn test` 或在目录树直接 `Run Tests in 'com.aliyun.code83.round4'`。

**注意:**
不要更改故障检测用例和数据，不要试图绕过故障检测工具。

#### 2. 启动 Server（服务器软件） 和 Client（光团存储介质）
服务器软件中存在多个 bug，导致无法读取或读取内容出错，尝试修复 bug 读取光团内容。

- 打开 Round4Application.java 文件，点击 `Run Round4Application.main()` 启动服务。
- 打开 terminal 执行 `./round4` 启动存储介质，观察输出逐一修复 bug

**注意:**
为防止真相泄漏，光团存储介质探测到任何干扰读取数据的行为，都会启动自毁程序！
不信？！那你试试 debug (´ｰ∀ｰ`) —— by 万圣节鬼鬼

#### 3. 撞墙推墙的推荐
程序猿和程序媛们，抓耳挠腮了有没有！来来来，看神器来了๑乛◡乛๑
光团存储介质原厂家「阿里云-代码平台」官方提供应用观测器，在不干扰光团存储介质的情况下就可观测通信过程。

【应用观测器】使用方法：
-   打开 Round4Application.java 文件，点击 `Edit Round4Application.main()` 编辑配置。
-   在配置页，设置VM options为`-agentpath:/tmp/cdbg_java_agent.so`（请勿修改或移动文件）
-   点击 `Run Round4Application.main()` 启动服务。
-   在编辑器中想要调试的位置，右键选择`应用观测器-添加日志点`或者`应用观测器-添加快照(虚拟断点)`等方式进行调试，其中快照（虚拟断点）会在设置位置触发时，返回触发时的变量和调用堆栈情况，但并不会阻塞进程运行。
-   更详细的说明，可以参考`https://thoughts.aliyun.com/share/617e1a5b727f03001a11a099#617e185d6ae8e92c050ba88b`
-   **注意:**
目前应用观测器和debug模式不能同时运行，使用应用观测器时请勿通过`Debug Round4Application.main()`启动服务

#### 4. 提交打分

提交打分过程如下：
- 打开 Round4Application.java 文件，点击 `Run Round4Application.main()` 启动服务。
- 打开 Terminal 执行 `./round4 --submit` 提交打分，过程预计 10s

如果你回答正确所有答案，并且总得分达到60分，那么你将揭开光团，面对最后这致命的真相。其中答案占10分，修复问题占90分。

2021年10月31日18点之后，空间将要崩塌，灰雾也将散去，再次提交即可揭开光团。


**注意:**
18点比赛结束，真相结局水晶开放给所有选手，除在 WebIDE 内，也可在18点后刷新官网页面领取真相。真相不计入线索。

如有问题，请加钉钉群：34336891